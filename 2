#!/usr/local/bin/perl
use strict; use warnings;
#########################

my ($dir, $dump) = @ARGV;

my $url0 = 'https://archive.org/download/';
my (@txt, @mp4, @pdf, @jpg, @tif, @mp3, @gif, @meta, @png); 

opendir(my $DH, $dir);
my @dir = <$DH>;
for my $file (@dir)
{
	open($ifh, '<', "$dump$file");
	my @i = <$ifh>;
	for (@i)
	{
		my $link = $_;
		$link =~ s?<a href="??; $link =~ s?">.*??;
		
		if (/\.txt/ $link)
			{ my $url3 = $url.$file.'/'.$link; push @txt, $url3; }
		if (/\.mp4/ $link)
			{ my $url3 = $url.$file.'/'.$link; push @mp4, $url3; }
		if (/\.pdf/ $link)
			{ my $url3 = $url.$file.'/'.$link; push @pdf, $url3; }
		if (/\.jpg/ $link)
			{ my $url3 = $url.$file.'/'.$link; push @jpg, $url3; }
		if (/\.tif/ $link)
			{ my $url3 = $url.$file.'/'.$link; push @mp3, $url3; }
		if (/\.gif/ $link)
			{ my $url3 = $url.$file.'/'.$link; push @gif, $url3; }
		if (/\.tif/ $link)
			{ my $url3 = $url.$file.'/'.$link; push @tif, $url3; }
		if (/\.png/ $link)
			{ my $url3 = $url.$file.'/'.$link; push @png, $url3; }
		if (/_meta\.xml/ $link)
			{ my $url3 = $url.$file.'/'.$link; push @meta, $url3; }
	}
}	
open ($txtfh, <, 'txt');
print $fh @txt;
open ($mp4fh, <, 'mp4');
print $mp4fh @mp4;
open ($mp3fh, <, 'mp3');
print $mp3fh @mp3;
open ($jpgfh, <, 'jpg');
print $jpgfh @jpg;
open ($pngfh, <, 'png');
print $pngfh @png;
open ($pdffh, <, 'pdf');
print $pdffh @pdf;
open ($tiffh, <, 'tif');
print $tiffh @tif;
open ($giffh, <, 'gif');
print $giffh @gif;
open ($metafh, <, 'meta');
print $metafh @meta;
	
